# CSPR Plant Monitoring System Using Raspberry Pis and NEMA 17 Motors
These codes run on RealSense D345i
There are two different types of code, client code and server code. The client codes are run on raspberry pi and the server code are run on the compute. Since the system requires connection and communication between the clients and the server, it is necessary for all the devices to connect to a same network. For some scripts that requires communication, the user should change the server url into the user's url. The url is shown once the server.py is launched.
For the server computer, server.py should be run first. No additional actions are required after the script is run. It is the base of the network's communication and it is vital to keep it running at the backend.
Next, run anchor_identify.py. This script is used to identify the coordinates of the anchors/motors. To use this script, left click the motor of Pi4, Pi3, Pi2 and Pi1 sequencially. The script uses global registration, so rotation of the camera is allowed. However, to acheive better accuracy, the rotation better be kept minimal or best no rotation.
After identifying all four anchors, anchor_identify.py will automatically shut down. You can observe the coordinates on the server url webpage. Then robot_identify.py should be run. There are currently two versions of this scirpt. robot_identify.py is used to identify colour, in our case, yellow, while robot_identify_infrared.py is used to identify infrared light. There is no logic difference between the two scripts, so just run the script accordingly with the user's object mark. After running the script, the user needs to click on the item that should be tracked. In our case, it is the center of the robot platform. After clicking, the script will keep running and updating the 'robot coordinate' on the website.
With server.py and robot_identify.py running at the backend, the system has finished initialization. Next thing is to run the client end scripts. /// leave blank edit later

After the client end scripts are run, the user can choose to mannually enter the target coordinate via the server url website or run the 50_steps_fixed.py script to move the robot around 50 times. The record of the movements are kept in movement_records.json. 
With the movement_records.json, the user can start rnning fine_tune_model.py. It is a script that is designed to move the robot and finetune the robot to take pictures of the plants. The target coordinates in this script should be kept the same with 50_steps_fixed.py since the model performs better with similar data. Both calc.py and findGreen.py are imported to help the scripts.
After this, the user can use evaluation.py to observe the performance of the system.

model_compute_BFS.py, model_demonstration.py and plot_the_model.py are used to simulate the system with reliable physical model. model_demonstration.py is a 3D model graph where the user can adjust X,Y and Z axis. model_compute_BFS.py is a script that computes every dot's imformation in the required range. It includes the robot's posture, the cables' tension at the position of the dot. After the computation, the result is saved in platform_workspace_data.csv, while plot_the_model.py is used to make plots with this data file.
